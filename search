
kubectl get configmap prometheus-server -n <namespace> -o jsonpath='{.data["prometheus.yaml"]}' | less


($current_memory_usage / $total_memory) * 100 > 85

memory-pressure-pod.yaml

apiVersion: v1
kind: Pod
metadata:
  name: memory-pressure-pod
spec:
  containers:
  - name: busybox
    image: busybox
    command: ["/bin/sh"]
    args: ["-c", "while true; do dd if=/dev/zero of=/dev/null; done"]



====

import os
import psutil

def consume_memory(total_memory_mb):
    process = psutil.Process(os.getpid())
    total_memory_bytes = total_memory_mb * 1024 * 1024
    data = bytearray(total_memory_bytes)

if __name__ == "__main__":
    total_memory_mb = 15746  # Total memory in megabytes (MB) you want to consume
    consume_memory(total_memory_mb)

python consume_memory.py
